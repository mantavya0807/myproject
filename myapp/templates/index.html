{% extends 'base.html' %}
{% load static %}

{% block title %}Mantavya Mahajan - Portfolio{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section" data-aos="fade-up">
    <div class="hero-content">
        <div class="profile-image" data-aos="fade-right">
            <img src="{% static 'photo.jpeg' %}" alt="Mantavya Mahajan" class="profile-pic" loading="lazy">
        </div>
        <div class="hero-text" data-aos="fade-left">
            <h1 class="welcome-title" style="color: #666;">Hi, I'm Mantavya Mahajan</h1>
            <p class="welcome-subtitle" style="color: #666;">Computer Science &amp; Computational Mathematics Student
            </p>
            <div class="typing-container">
                <div class="typing-text" id="typingText" style="color: #666;"></div>
            </div>
            <div class="cta-buttons">
                <a href="{% static 'resume\Mantavya Mahajan_Resume.pdf' %}" class="cta-button primary" target="_blank"
                    rel="noopener noreferrer">
                    <i class="fas fa-file-alt"></i> View Resume
                </a>
                <a href="{% url 'contact' %}" class="cta-button secondary">
                    <i class="fas fa-envelope"></i> Contact Me
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Stats Section -->
<div class="stats-section" data-aos="fade-up">
    <div class="stat-card" role="button" tabindex="0" data-aos="zoom-in" data-aos-delay="100">
        <i class="fas fa-code"></i>
        <div class="stat-content">
            <h3 class="counter" data-target="10">0</h3>
            <p>Projects Completed</p>
        </div>
        <div class="stat-tooltip" role="tooltip">
            <h4>Project Portfolio</h4>
            <ul>
                <li>DermAI - ML-based skin condition classifier</li>
                <li>AgriScience - Farm management platform</li>
                <li>Course Scheduler - Academic planning tool</li>
                <li>And many more innovative solutions!</li>
            </ul>
        </div>
    </div>

    <div class="stat-card" role="button" tabindex="0" data-aos="zoom-in" data-aos-delay="200">
        <i class="fas fa-laptop-code"></i>
        <div class="stat-content">
            <h3>3.6</h3>
            <p>GPA</p>
        </div>
        <div class="stat-tooltip" role="tooltip">
            <h4>Academic Achievement</h4>
            <ul>
                <li>Maintaining Dean's List standing</li>
                <li>Double major in CS and Math</li>
                <li>Advanced coursework in AI/ML</li>
                <li>Top performer in core CS courses</li>
            </ul>
        </div>
    </div>

    <div class="stat-card" role="button" tabindex="0" data-aos="zoom-in" data-aos-delay="300">
        <i class="fas fa-briefcase"></i>
        <div class="stat-content">
            <h3>2</h3>
            <p>Internships</p>
        </div>
        <div class="stat-tooltip" role="tooltip">
            <h4>Professional Experience</h4>
            <ul>
                <li>Software Engineering Intern at Tech Corp</li>
                <li>Data Science Intern at Analytics Co</li>
                <li>Hands-on industry experience</li>
                <li>Real-world project delivery</li>
            </ul>
        </div>
    </div>

    <div class="stat-card" role="button" tabindex="0" data-aos="zoom-in" data-aos-delay="400">
        <i class="fas fa-users"></i>
        <div class="stat-content">
            <h3 class="counter" data-target="220">0</h3>
            <p>Students Mentored</p>
        </div>
        <div class="stat-tooltip" role="tooltip">
            <h4>Mentorship Impact</h4>
            <ul>
                <li>Lead Learning Assistant for CS courses</li>
                <li>Peer tutor for Math 140 &amp; Physics 211</li>
                <li>EON Program Head Mentor</li>
                <li>95% positive feedback from students</li>
            </ul>
        </div>
    </div>

    <div class="stat-card" role="button" tabindex="0" data-aos="zoom-in" data-aos-delay="500">
        <i class="fas fa-award"></i>
        <div class="stat-content">
            <h3>5x</h3>
            <p>Dean's List</p>
        </div>
        <div class="stat-tooltip" role="tooltip">
            <h4>Academic Excellence</h4>
            <ul>
                <li>Fall 2022 - Dean's List</li>
                <li>Spring 2023 - Dean's List</li>
                <li>Fall 2023 - Dean's List</li>
                <li>Spring 2024 - Dean's List</li>
                <li>Consistently top academic performance</li>
            </ul>
        </div>
    </div>
</div>

<!-- Featured Projects -->
<div class="section" id="featured-projects" data-aos="fade-up">
    <h2 class="animated-slide-in"><i class="fas fa-star"></i> Featured Projects</h2>
    <div class="projects-grid">
        <div class="project-card" data-aos="fade-up" data-aos-delay="100">
            <div class="project-icon">
                <i class="fas fa-home"></i>
            </div>
            <div class="project-content">
                <h3>HomeHarmony</h3>
                <p>A comprehensive real estate platform built with React, TypeScript, and Supabase. Facilitates seamless
                    interactions between buyers and sellers with robust property management and communication features.
                </p>
                <div class="tech-stack">
                    <span class="tech-tag">React</span>
                    <span class="tech-tag">TypeScript</span>
                    <span class="tech-tag">Supabase</span>
                    <span class="tech-tag">Tailwind CSS</span>
                    <span class="tech-tag">Google Maps</span>
                    <span class="tech-tag">Stripe</span>
                </div>
                <a href="https://www.home-harmony.me/" class="project-link" target="_blank" rel="noopener noreferrer">
                    View Project <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>

        <div class="project-card" data-aos="fade-up" data-aos-delay="200">
            <div class="project-icon">
                <i class="fas fa-globe"></i>
            </div>
            <div class="project-content">
                <h3>M8 Website</h3>
                <p>A dynamic web platform built with React and Node.js for M8 LLC. Features user authentication, social
                    networking, and real-time communication functionalities.</p>
                <div class="tech-stack">
                    <span class="tech-tag">React</span>
                    <span class="tech-tag">NodeJS</span>
                    <span class="tech-tag">Express</span>
                </div>
                <a href="https://github.com/mantavya0807" class="project-link" target="_blank"
                    rel="noopener noreferrer">
                    View Project <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>

        <!-- The third project: Mealer -->
        <div class="project-card" data-aos="fade-up" data-aos-delay="300">
            <div class="project-icon">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="project-content">
                <h3>Mealer</h3>
                <p>A web application that helps Penn State students optimize their meal plan usage through automated
                    data collection and analytics...</p>
                <div class="tech-stack">
                    <span class="tech-tag">React</span>
                    <span class="tech-tag">Firebase</span>
                    <span class="tech-tag">TypeScript</span>
                    <span class="tech-tag">Node.js</span>
                    <span class="tech-tag">Puppeteer</span>
                    <span class="tech-tag">Tailwind CSS</span>
                </div>
                <a href="https://github.com/mantavya0807/Mealer" class="project-link" target="_blank"
                    rel="noopener noreferrer">
                    View Project <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Current Focus -->
<div class="section" id="current-focus" data-aos="fade-up">
    <h2 class="animated-slide-in"><i class="fas fa-rocket"></i> Current Focus</h2>
    <div class="focus-grid">
        <div class="focus-card" data-aos="fade-up" data-aos-delay="100">
            <div class="focus-icon">
                <i class="fas fa-briefcase"></i>
            </div>
            <div class="focus-content">
                <h3>Actively Seeking Internships</h3>
                <p>Exploring opportunities in software development, data science, and machine learning to apply my
                    skills in real-world projects.</p>
            </div>
        </div>
        <div class="focus-card" data-aos="fade-up" data-aos-delay="200">
            <div class="focus-icon">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="focus-content">
                <h3>Research in Economic Policy Index</h3>
                <p>Conducting research to develop a comprehensive index that measures the impact of economic policies on
                    various sectors.</p>
            </div>
        </div>
        <div class="focus-card" data-aos="fade-up" data-aos-delay="300">
            <div class="focus-icon">
                <i class="fas fa-chalkboard-teacher"></i>
            </div>
            <div class="focus-content">
                <h3>Teaching Assistant for Math &amp; CS</h3>
                <p>Assisting professors in teaching advanced mathematics and computer science courses, providing support
                    to students.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    /* Hero Section */
    .hero-section {
        padding: 4rem 2rem;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 1rem;
        margin-bottom: 2rem;
    }

    .hero-content {
        display: flex;
        align-items: center;
        gap: 3rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .profile-image {
        flex: 0 0 300px;
        position: relative;
        margin-left: -50px;
        /* Shift image slightly to the left */
    }

    .profile-pic {
        width: 100%;
        height: 300px;
        object-fit: cover;
        border-radius: 1rem;
        box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.1);
        transition: all 0.5s ease;
        border: 5px solid white;
    }

    .profile-image::after {
        content: '';
        position: absolute;
        top: 20px;
        left: 20px;
        width: 100%;
        height: 100%;
        background: var(--primary-color);
        border-radius: 1rem;
        z-index: -1;
        opacity: 0.1;
        transition: all 0.5s ease;
    }

    .profile-image:hover .profile-pic {
        transform: translateY(-10px) translateX(-10px);
    }

    .profile-image:hover::after {
        transform: translateY(10px) translateX(10px);
        opacity: 0.2;
    }

    /* Stats Section */
    .stats-section {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 1.5rem;
        margin: 2rem 0;
    }

    .stat-card {
        background: white;
        padding: 1.5rem;
        border-radius: 1rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        gap: 1rem;
        transition: transform 0.3s ease;
        position: relative;
        overflow: hidden;
        cursor: pointer;
    }

    .stat-card:hover {
        transform: translateY(-5px);
    }

    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg,
                transparent,
                rgba(255, 255, 255, 0.8),
                transparent);
        transition: 0.5s;
    }

    .stat-card:hover::before {
        left: 100%;
    }

    .stat-card i {
        font-size: 2rem;
        color: var(--primary-color);
    }

    .stat-content h3 {
        font-size: 1.5rem;
        margin: 0;
        color: var(--primary-color);
    }

    .stat-content p {
        margin: 0;
        color: #666;
    }

    /* Projects Grid */
    .projects-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 2rem;
        margin-top: 2rem;
    }

    .project-card {
        background: white;
        padding: 1.5rem;
        border-radius: 1rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
        position: relative;
        overflow: hidden;
        /* Key fix: let clicks pass to the link */
    }

    /* So the overlay won't block link clicks: */
    .project-card::after {
        content: '';
        position: absolute;
        bottom: 20px;
        left: 0;
        width: 100%;
        height: 0;
        background: rgba(99, 102, 241, 0.1);
        transition: height 0.3s ease;
        pointer-events: none;
        /* <--- important fix! */
    }

    .project-card:hover::after {
        height: 100%;
    }

    .project-card:hover {
        transform: translateY(-5px);
    }

    .project-icon {
        color: var(--primary-color);
        font-size: 2rem;
        margin-bottom: 1rem;
    }

    .project-content h3 {
        color: var(--primary-color);
        margin: 0.5rem 0;
        font-size: 1.25rem;
    }

    .project-content p {
        color: #666;
        font-size: 0.95rem;
        margin-bottom: 1rem;
    }

    .tech-stack {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin: 1rem 0;
    }

    .tech-tag {
        background: rgba(99, 102, 241, 0.1);
        color: var(--primary-color);
        padding: 0.4rem 0.8rem;
        border-radius: 0.5rem;
        font-size: 0.85rem;
        font-weight: 500;
    }

    .tech-tag:hover {
        background: var(--primary-color);
        color: white;
    }

    .project-link {
        display: inline-flex;
        align-items: center;
        color: var(--primary-color);
        text-decoration: none;
        font-weight: 500;
        font-size: 0.95rem;
        transition: transform 0.3s ease;
        position: relative;
        z-index: 2;
        /* above the overlay */
    }

    .project-link:hover {
        transform: translateX(5px);
    }

    /* Focus Grid */
    .focus-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 2rem;
        margin-top: 2rem;
    }

    .focus-card {
        background: white;
        padding: 1.5rem;
        border-radius: 1rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
        display: flex;
        flex-direction: column;
        position: relative;
        overflow: hidden;
    }

    .focus-card:hover {
        transform: translateY(-5px);
    }

    .focus-card::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 0;
        background: rgba(99, 102, 241, 0.1);
        transition: height 0.3s ease;
        pointer-events: none;
        /* same fix if needed */
    }

    .focus-card:hover::after {
        height: 100%;
    }

    .focus-icon {
        color: var(--primary-color);
        font-size: 2rem;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
    }

    .focus-card:hover .focus-icon {
        transform: scale(1.2) rotate(10deg);
    }

    .focus-content h3 {
        color: var(--primary-color);
        margin: 0.5rem 0;
        font-size: 1.25rem;
    }

    .focus-content p {
        color: #666;
        font-size: 0.95rem;
        margin-bottom: 0;
        line-height: 1.5;
    }

    /* CTA Buttons */
    .cta-buttons {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
    }

    .cta-button {
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .cta-button.primary {
        background: var(--primary-color);
        color: white;
    }

    .cta-button.secondary {
        background: white;
        color: var(--primary-color);
        border: 2px solid var(--primary-color);
    }

    .cta-button:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-hover);
    }

    .cta-button::after {
        content: "";
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        background: rgba(255, 255, 255, 0.3);
        opacity: 0;
        transition: opacity 0.3s;
    }

    .cta-button:active::after {
        opacity: 1;
        transition: none;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .hero-content {
            flex-direction: column;
            text-align: center;
        }

        .profile-image {
            flex: 0 0 200px;
            margin-left: 0;
        }

        .profile-pic {
            height: 200px;
        }

        .stats-section {
            grid-template-columns: repeat(2, 1fr);
        }

        .projects-grid,
        .focus-grid {
            grid-template-columns: 1fr;
        }

        .cta-buttons {
            justify-content: center;
        }

        .hero-section {
            padding: 2rem 1rem;
        }

        .welcome-title {
            font-size: 2rem;
        }

        .welcome-subtitle {
            font-size: 1.25rem;
        }
    }

    @media (max-width: 480px) {
        .stats-section {
            grid-template-columns: 1fr;
        }

        .cta-buttons {
            flex-direction: column;
        }

        .cta-button {
            width: 100%;
            justify-content: center;
        }
    }

    /* Animations */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fade-in {
        animation: fadeIn 0.8s ease forwards;
    }

    /* Smooth scrolling */
    html {
        scroll-behavior: smooth;
    }

    /* Subtle gradient background on body */
    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg,
                var(--bg-color),
                rgba(99, 102, 241, 0.1),
                var(--bg-color));
        pointer-events: none;
        z-index: -1;
    }

    /* Link Styles */
    a {
        color: var(--primary-color);
        transition: color var(--transition-speed) ease;
    }

    a:hover {
        color: var(--accent-color);
    }

    /* Card hover effects */
    .project-card:hover,
    .focus-card:hover,
    .stat-card:hover {
        border-color: var(--primary-color);
        box-shadow: var(--shadow-hover);
    }

    /* Enhanced Stats Card Hover Effects */
    .stat-tooltip {
        position: absolute;
        top: 120%;
        left: 50%;
        transform: translateX(-50%) scale(0.95);
        background: white;
        padding: 1rem;
        border-radius: 0.5rem;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        width: 250px;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        z-index: 100;
    }

    .stat-tooltip::before {
        content: '';
        position: absolute;
        top: -8px;
        left: 50%;
        transform: translateX(-50%) rotate(45deg);
        width: 16px;
        height: 16px;
        background: white;
    }

    .stat-tooltip h4 {
        color: var(--primary-color);
        margin-bottom: 0.5rem;
        font-size: 1rem;
    }

    .stat-tooltip ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .stat-tooltip li {
        font-size: 0.875rem;
        color: #666;
        margin-bottom: 0.25rem;
        padding-left: 1rem;
        position: relative;
    }

    .stat-tooltip li::before {
        content: '•';
        position: absolute;
        left: 0;
        color: var(--primary-color);
    }

    .stat-card:hover .stat-tooltip,
    .stat-card:focus .stat-tooltip {
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) scale(1);
    }

    .stat-card:focus {
        outline: none;
    }

    /* AOS Animations */
    [data-aos] {
        opacity: 0;
        transition-property: transform, opacity;
    }

    .aos-animate {
        opacity: 1;
        transform: translate(0);
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Text phrases for typing effect
        const phrases = [
            "Welcome to my personal website!",
            "Exploring the future through code and innovation.",
            "Passionate about Technology and Problem Solving.",
            "Building solutions that make a difference."
        ];
        let phraseIndex = 0;
        let charIndex = 0;
        const typingText = document.getElementById('typingText');
        const typingDelay = 40;  // Adjust for smoother typing
        const erasingDelay = 25;
        const newPhraseDelay = 1500; // Time before starting to erase

        function type() {
            if (charIndex < phrases[phraseIndex].length) {
                typingText.textContent = phrases[phraseIndex].substring(0, charIndex + 1);
                charIndex++;
                setTimeout(type, typingDelay);
            } else {
                setTimeout(erase, newPhraseDelay);
            }
        }

        function erase() {
            if (charIndex > 0) {
                typingText.textContent = phrases[phraseIndex].substring(0, charIndex - 1);
                charIndex--;
                setTimeout(erase, erasingDelay);
            } else {
                phraseIndex = (phraseIndex + 1) % phrases.length;
                setTimeout(type, typingDelay);
            }
        }

        type();

        // Counter animation
        function animateCounter(counter) {
            const target = parseInt(counter.dataset.target);
            const duration = 2000;
            const increment = target / (duration / 16);
            let current = 0;

            const animation = setInterval(() => {
                current += increment;
                counter.textContent = Math.floor(current);
                if (current >= target) {
                    counter.textContent = target;
                    clearInterval(animation);
                }
            }, 16);
        }

        // Initialize counters when visible
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && entry.target.classList.contains('counter')) {
                    animateCounter(entry.target);
                    observer.unobserve(entry.target);
                }
            });
        });

        document.querySelectorAll('.counter').forEach(counter => {
            observer.observe(counter);
        });

        // Keyboard accessibility for stat cards
        document.querySelectorAll('.stat-card').forEach(card => {
            card.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    card.focus();
                }
            });
        });

        // Initialize AOS (scroll animations)
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true,
        });

        // Navbar Toggle Accessibility
        const toggleButton = document.querySelector('.navbar-toggler');
        const navbarNav = document.getElementById('navbarNav');
        toggleButton.addEventListener('keydown', function (e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                navbarNav.classList.toggle('show');
            }
        });

        // Ripple Effect on Click/Tap
        document.addEventListener('click', function (e) {
            // We attach the ripple to certain clickable elements
            const target = e.target.closest('.cta-button, .resume-download a, .stat-card, .project-card, .focus-card');
            if (target) {
                const rect = target.getBoundingClientRect();
                const ripple = document.createElement('span');
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size / 2;
                const y = e.clientY - rect.top - size / 2;

                ripple.style.width = ripple.style.height = `${size}px`;
                ripple.style.left = `${x}px`;
                ripple.style.top = `${y}px`;
                ripple.classList.add('ripple');

                // Remove existing ripples if any
                const existingRipples = target.getElementsByClassName('ripple');
                while (existingRipples[0]) {
                    existingRipples[0].parentNode.removeChild(existingRipples[0]);
                }

                target.appendChild(ripple);
                // The link click will still go through because we are not preventDefaulting
            }
        });

        // Create dynamic Ripple CSS
        const style = document.createElement('style');
        style.innerHTML = `
            .ripple {
                position: absolute;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.6);
                transform: scale(0);
                animation: ripple-animation 600ms linear;
                pointer-events: none; /* Let the click pass through to the link */
            }
            @keyframes ripple-animation {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    });
</script>
{% endblock %}